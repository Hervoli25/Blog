{% extends 'base.html' %} {% block content %}
<section class="py-12 bg-gray-100">
	<div class="container mx-auto">
		<h2 class="text-3xl font-bold mb-8 text-center">{{ post.title }}</h2>
		<div class="bg-white shadow-lg rounded-lg p-6">
			<p class="text-gray-700 mb-4">{{ post.content }}</p>
			<p class="text-gray-500">By: {{ author.username }}</p>
			<div>
				{% if current_user.is_authenticated %}
				<form
					action="{{ url_for('app.follow', user_id=author.id) }}"
					method="POST"
				>
					<button
						type="submit"
						class="follow-button {{ 'unfollow' if current_user.is_following(author) else 'follow' }}"
					>
						{{ 'Unfollow' if current_user.is_following(author) else 'Follow' }}
					</button>
				</form>
				{% else %}
				<p>
					<a href="{{ url_for('app.login') }}">Log in</a> to follow this author.
				</p>
				{% endif %}
			</div>
		</div>
		<h3 class="text-2xl font-bold mb-4 mt-8">Comments</h3>
		<div>
			{% for comment in comments %}
			<div class="bg-white shadow-lg rounded-lg p-6 mb-4">
				<p class="text-gray-700">{{ comment.content }}</p>
				<p class="text-gray-500">By: {{ comment.author.username }}</p>
			</div>
			{% endfor %}
		</div>
		<div>
			{% if current_user.is_authenticated %}
			<form
				action="{{ url_for('app.comment_post', post_id=post.id) }}"
				method="POST"
			>
				{{ form.hidden_tag() }}
				<div class="mb-4">
					<label for="content" class="block text-gray-700">Add a Comment</label>
					{{ form.content(class="w-full p-2 border border-gray-300 rounded") }}
				</div>
				<button
					type="submit"
					class="bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-700"
				>
					Comment
				</button>
			</form>
			{% else %}
			<p><a href="{{ url_for('app.login') }}">Log in</a> to comment.</p>
			{% endif %}
		</div>
	</div>
</section>
{% endblock %}
